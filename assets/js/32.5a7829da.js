(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{262:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"arthas-应用指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arthas-应用指南"}},[t._v("#")]),t._v(" Arthas 应用指南")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("Arthas")]),t._v(" 是 Alibaba 开源的 Java 诊断工具 。")])]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[s("code",[t._v("Arthas")]),t._v("可以解决的问题：")]),t._v(" "),s("ol",[s("li",[t._v("这个类从哪个 jar 包加载的？为什么会报各种类相关的 Exception？")]),t._v(" "),s("li",[t._v("我改的代码为什么没有执行到？难道是我没 commit？分支搞错了？")]),t._v(" "),s("li",[t._v("遇到问题无法在线上 debug，难道只能通过加日志再重新发布吗？")]),t._v(" "),s("li",[t._v("线上遇到某个用户的数据处理有问题，但线上同样无法 debug，线下无法重现！")]),t._v(" "),s("li",[t._v("是否有一个全局视角来查看系统的运行状况？")]),t._v(" "),s("li",[t._v("有什么办法可以监控到 JVM 的实时运行状态？")])]),t._v(" "),s("p",[s("code",[t._v("Arthas")]),t._v("支持 JDK 6+，支持 Linux/Mac/Windows，采用命令行交互模式，同时提供丰富的 "),s("code",[t._v("Tab")]),t._v(" 自动补全功能，进一步方便进行问题的定位和诊断。")]),t._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("h3",{attrs:{id:"使用arthas-boot（推荐）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用arthas-boot（推荐）"}},[t._v("#")]),t._v(" 使用"),s("code",[t._v("arthas-boot")]),t._v("（推荐）")]),t._v(" "),s("p",[t._v("下载"),s("code",[t._v("arthas-boot.jar")]),t._v("，然后用"),s("code",[t._v("java -jar")]),t._v("的方式启动：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("wget https://alibaba.github.io/arthas/arthas-boot.jar\njava -jar arthas-boot.jar\n")])])]),s("p",[t._v("打印帮助信息：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar arthas-boot.jar -h\n")])])]),s("ul",[s("li",[s("p",[t._v("如果下载速度比较慢，可以使用 aliyun 的镜像：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar arthas-boot.jar --repo-mirror aliyun --use-http\n")])])])]),t._v(" "),s("li",[s("p",[t._v("如果从 github 下载有问题，可以使用 gitee 镜像")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("wget https://arthas.gitee.io/arthas-boot.jar\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"使用as-sh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用as-sh"}},[t._v("#")]),t._v(" 使用"),s("code",[t._v("as.sh")])]),t._v(" "),s("p",[t._v("Arthas 支持在 Linux/Unix/Mac 等平台上一键安装，请复制以下内容，并粘贴到命令行中，敲 "),s("code",[t._v("回车")]),t._v(" 执行即可：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("curl -L https://alibaba.github.io/arthas/install.sh | sh\n")])])]),s("p",[t._v("上述命令会下载启动脚本文件 "),s("code",[t._v("as.sh")]),t._v(" 到当前目录，你可以放在任何地方或将其加入到 "),s("code",[t._v("$PATH")]),t._v(" 中。")]),t._v(" "),s("p",[t._v("直接在 shell 下面执行"),s("code",[t._v("./as.sh")]),t._v("，就会进入交互界面。")]),t._v(" "),s("p",[t._v("也可以执行"),s("code",[t._v("./as.sh -h")]),t._v("来获取更多参数信息。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("如果从 github 下载有问题，可以使用 gitee 镜像")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("curl -L https://arthas.gitee.io/install.sh | sh\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"全量安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全量安装"}},[t._v("#")]),t._v(" 全量安装")]),t._v(" "),s("p",[t._v("最新版本，点击下载："),s("a",{attrs:{href:"http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&g=com.taobao.arthas&a=arthas-packaging&e=zip&c=bin&v=LATEST",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("解压后，在文件夹里有"),s("code",[t._v("arthas-boot.jar")]),t._v("，直接用"),s("code",[t._v("java -jar")]),t._v("的方式启动：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar arthas-boot.jar\n")])])]),s("p",[t._v("打印帮助信息：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -jar arthas-boot.jar -h\n")])])]),s("h2",{attrs:{id:"基础使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础使用"}},[t._v("#")]),t._v(" 基础使用")]),t._v(" "),s("h3",{attrs:{id:"启动-demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-demo"}},[t._v("#")]),t._v(" 启动 Demo")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://alibaba.github.io/arthas/arthas-demo.jar\njava -jar arthas-demo.jar\n")])])]),s("p",[s("code",[t._v("arthas-demo")]),t._v("是一个简单的程序，每隔一秒生成一个随机数，再执行质因式分解，并打印出分解结果。")]),t._v(" "),s("p",[s("code",[t._v("arthas-demo")]),t._v("源代码："),s("a",{attrs:{href:"https://github.com/alibaba/arthas/blob/master/demo/src/main/java/demo/MathGame.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"启动-arthas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-arthas"}},[t._v("#")]),t._v(" 启动 arthas")]),t._v(" "),s("p",[t._v("在命令行下面执行（使用和目标进程一致的用户启动，否则可能 attach 失败）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("wget https://alibaba.github.io/arthas/arthas-boot.jar\njava -jar arthas-boot.jar\n")])])]),s("ul",[s("li",[t._v("执行该程序的用户需要和目标进程具有相同的权限。比如以"),s("code",[t._v("admin")]),t._v("用户来执行："),s("code",[t._v("sudo su admin && java -jar arthas-boot.jar")]),t._v(" 或 "),s("code",[t._v("sudo -u admin -EH java -jar arthas-boot.jar")]),t._v("。")]),t._v(" "),s("li",[t._v("如果 attach 不上目标进程，可以查看"),s("code",[t._v("~/logs/arthas/")]),t._v(" 目录下的日志。")]),t._v(" "),s("li",[t._v("如果下载速度比较慢，可以使用 aliyun 的镜像："),s("code",[t._v("java -jar arthas-boot.jar --repo-mirror aliyun --use-http")])]),t._v(" "),s("li",[s("code",[t._v("java -jar arthas-boot.jar -h")]),t._v(" 打印更多参数信息。")])]),t._v(" "),s("p",[t._v("选择应用 java 进程：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ $ java -jar arthas-boot.jar\n* "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35542")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("71560")]),t._v(" arthas-demo.jar\n")])])]),s("p",[t._v("Demo 进程是第 2 个，则输入 2，再输入"),s("code",[t._v("回车/enter")]),t._v("。Arthas 会 attach 到目标进程上，并输出日志：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Try to attach process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("71560")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Attach process "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("71560")]),t._v(" success.\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" arthas-client connect "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3658")]),t._v("\n  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.\n /  O  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  .--. "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("--.  .--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'|  '")]),t._v("--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'  | /  O  \\ '")]),t._v("   .-"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n|  .-.  ||  '")]),t._v("--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  .--.  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("  .-.  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("-.\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(".-"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'    |\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--' "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("--'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),t._v("--'   "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'   "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--'  "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("--'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--' "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("--"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'`-----'")]),t._v("\n\nwiki: https://alibaba.github.io/arthas\nversion: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(".5.20181127201536\npid: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("71560")]),t._v("\ntime: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":16:24\n\n$\n")])])]),s("h3",{attrs:{id:"查看-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看-dashboard"}},[t._v("#")]),t._v(" 查看 dashboard")]),t._v(" "),s("p",[t._v("输入"),s("a",{attrs:{href:"https://alibaba.github.io/arthas/dashboard.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dashboard"),s("OutboundLink")],1),t._v("，按"),s("code",[t._v("回车/enter")]),t._v("，会展示当前进程的信息，按"),s("code",[t._v("ctrl+c")]),t._v("可以中断执行。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ dashboard\nID     NAME                   GROUP          PRIORI STATE  %CPU    TIME   INTERRU DAEMON\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("     pool-2-thread-1        system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("      WAITIN "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("67")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("     Timer-for-arthas-dashb system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("     AsyncAppender-Worker-a system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("      WAITIN "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("      Attach Listener        system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("      RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("      Finalizer              system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("      WAITIN "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("      Reference Handler      system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     WAITIN "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("      Signal Dispatcher      system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("      RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v("     as-command-execute-dae system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     TIMED_ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("     job-timeout            system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v("      TIMED_ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("      main                   main           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("      TIMED_ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v("     nioEventLoopGroup-2-1  system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("     nioEventLoopGroup-2-2  system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("     nioEventLoopGroup-2-3  system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("     nioEventLoopGroup-3-1  system         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("     RUNNAB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":0    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nMemory             used   total max    usage GC\nheap               32M    155M  1820M  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.77")]),t._v("% gc.ps_scavenge.count  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\nps_eden_space      14M    65M   672M   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.21")]),t._v("% gc.ps_scavenge.time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("166")]),t._v("\nps_survivor_space  4M     5M    5M           s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nps_old_gen         12M    85M   1365M  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.91")]),t._v("% gc.ps_marksweep.count "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nnonheap            20M    23M   -1           gc.ps_marksweep.time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\ncode_cache         3M     5M    240M   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.32")]),t._v("% ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nRuntime\nos.name                Mac OS X\nos.version             "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.13")]),t._v(".4\njava.version           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),t._v(".0_162\njava.home              /Library/Java/JavaVir\n                       tualMachines/jdk1.8.0\n                       _162.jdk/Contents/Hom\n                       e/jre\n")])])]),s("h3",{attrs:{id:"通过-thread-命令来获取到arthas-demo进程的-main-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-thread-命令来获取到arthas-demo进程的-main-class"}},[t._v("#")]),t._v(" 通过 thread 命令来获取到"),s("code",[t._v("arthas-demo")]),t._v("进程的 Main Class")]),t._v(" "),s("p",[s("code",[t._v("thread 1")]),t._v("会打印线程 ID 1 的栈，通常是 main 函数的线程。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ thread "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'main('")]),t._v("\n    at demo.MathGame.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MathGame.java:17"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"通过-jad-来反编译-main-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-jad-来反编译-main-class"}},[t._v("#")]),t._v(" 通过 jad 来反编译 Main Class")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("$ jad demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MathGame")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassLoader")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("misc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Launcher")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppClassLoader")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@3d4eac69")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("misc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Launcher")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExtClassLoader")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@66350f69")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Location")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arthas"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n * Decompiled with CFR 0_132.\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrintStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("concurrent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MathGame")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),t._v(" random "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" illegalArgumentCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MathGame")]),t._v(" game "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MathGame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            game"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SECONDS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" random"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" primeFactors "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("primeFactors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MathGame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primeFactors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"illegalArgumentCount:%3d, "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("illegalArgumentCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" primeFactors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringBuffer")]),t._v(" sb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"="')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" iterator "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" primeFactors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("iterator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" factor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" iterator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("factor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("charAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteCharAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("primeFactors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("illegalArgumentCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalArgumentException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number is: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", need >= 2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                number "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("continue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Affect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cnt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" cost in "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("970")]),t._v(" ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h3",{attrs:{id:"watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#watch"}},[t._v("#")]),t._v(" watch")]),t._v(" "),s("p",[t._v("通过"),s("a",{attrs:{href:"https://alibaba.github.io/arthas/watch.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("watch"),s("OutboundLink")],1),t._v("命令来查看"),s("code",[t._v("demo.MathGame#primeFactors")]),t._v("函数的返回值：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("watch")]),t._v(" demo.MathGame primeFactors returnObj\nPress Ctrl+C to abort.\nAffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("class-cnt:1 , method-cnt:1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" cost "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("107")]),t._v(" ms.\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:30"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".715367ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:31"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".185203ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("null\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(".012416ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@ArrayList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("47")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2675531")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:33"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".311395ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@ArrayList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("317")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("887")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:34"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(".136007ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@ArrayList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("717593")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ts")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2018")]),t._v("-11-28 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":22:35"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v(".969732ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("@ArrayList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    @Integer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7651739")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("更多的功能可以查看"),s("a",{attrs:{href:"https://alibaba.github.io/arthas/advanced-use.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("进阶使用"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"退出-arthas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#退出-arthas"}},[t._v("#")]),t._v(" 退出 arthas")]),t._v(" "),s("p",[t._v("如果只是退出当前的连接，可以用"),s("code",[t._v("quit")]),t._v("或者"),s("code",[t._v("exit")]),t._v("命令。Attach 到目标进程上的 arthas 还会继续运行，端口会保持开放，下次连接时可以直接连接上。")]),t._v(" "),s("p",[t._v("如果想完全退出 arthas，可以执行"),s("code",[t._v("shutdown")]),t._v("命令。")]),t._v(" "),s("h2",{attrs:{id:"进阶使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进阶使用"}},[t._v("#")]),t._v(" 进阶使用")]),t._v(" "),s("h3",{attrs:{id:"基础命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础命令"}},[t._v("#")]),t._v(" 基础命令")]),t._v(" "),s("ul",[s("li",[t._v("help——查看命令帮助信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/cat.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cat"),s("OutboundLink")],1),t._v("——打印文件内容，和linux里的cat命令类似")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/pwd.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("pwd"),s("OutboundLink")],1),t._v("——返回当前的工作目录，和linux命令类似")]),t._v(" "),s("li",[t._v("cls——清空当前屏幕区域")]),t._v(" "),s("li",[t._v("session——查看当前会话的信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/reset.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("reset"),s("OutboundLink")],1),t._v("——重置增强类，将被 Arthas 增强过的类全部还原，Arthas 服务端关闭时会重置所有增强过的类")]),t._v(" "),s("li",[t._v("version——输出当前目标 Java 进程所加载的 Arthas 版本号")]),t._v(" "),s("li",[t._v("history——打印命令历史")]),t._v(" "),s("li",[t._v("quit——退出当前 Arthas 客户端，其他 Arthas 客户端不受影响")]),t._v(" "),s("li",[t._v("shutdown——关闭 Arthas 服务端，所有 Arthas 客户端全部退出")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/keymap.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("keymap"),s("OutboundLink")],1),t._v("——Arthas快捷键列表及自定义快捷键")])]),t._v(" "),s("h3",{attrs:{id:"jvm相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm相关"}},[t._v("#")]),t._v(" jvm相关")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/dashboard.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dashboard"),s("OutboundLink")],1),t._v("——当前系统的实时数据面板")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/thread.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("thread"),s("OutboundLink")],1),t._v("——查看当前 JVM 的线程堆栈信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/jvm.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("jvm"),s("OutboundLink")],1),t._v("——查看当前 JVM 的信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/sysprop.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("sysprop"),s("OutboundLink")],1),t._v("——查看和修改JVM的系统属性")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/sysenv.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("sysenv"),s("OutboundLink")],1),t._v("——查看JVM的环境变量")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/vmoption.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("vmoption"),s("OutboundLink")],1),t._v("——查看和修改JVM里诊断相关的option")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/logger.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("logger"),s("OutboundLink")],1),t._v("——查看和修改logger")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/getstatic.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("getstatic"),s("OutboundLink")],1),t._v("——查看类的静态属性")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/ognl.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ognl"),s("OutboundLink")],1),t._v("——执行ognl表达式")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/mbean.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mbean"),s("OutboundLink")],1),t._v("——查看 Mbean 的信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/heapdump.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("heapdump"),s("OutboundLink")],1),t._v("——dump java heap, 类似jmap命令的heap dump功能")])]),t._v(" "),s("h3",{attrs:{id:"class-classloader相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-classloader相关"}},[t._v("#")]),t._v(" class/classloader相关")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/sc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("sc"),s("OutboundLink")],1),t._v("——查看JVM已加载的类信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/sm.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("sm"),s("OutboundLink")],1),t._v("——查看已加载类的方法信息")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/jad.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("jad"),s("OutboundLink")],1),t._v("——反编译指定已加载类的源码")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/mc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mc"),s("OutboundLink")],1),t._v("——内存编绎器，内存编绎"),s("code",[t._v(".java")]),t._v("文件为"),s("code",[t._v(".class")]),t._v("文件")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/redefine.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("redefine"),s("OutboundLink")],1),t._v("——加载外部的"),s("code",[t._v(".class")]),t._v("文件，redefine到JVM里")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/dump.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dump"),s("OutboundLink")],1),t._v("——dump 已加载类的 byte code 到特定目录")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/classloader.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("classloader"),s("OutboundLink")],1),t._v("——查看classloader的继承树，urls，类加载信息，使用classloader去getResource")])]),t._v(" "),s("h3",{attrs:{id:"monitor-watch-trace相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monitor-watch-trace相关"}},[t._v("#")]),t._v(" monitor/watch/trace相关")]),t._v(" "),s("blockquote",[s("p",[t._v("请注意，这些命令，都通过字节码增强技术来实现的，会在指定类的方法中插入一些切面来实现数据统计和观测，因此在线上、预发使用时，请尽量明确需要观测的类、方法以及条件，诊断结束要执行 "),s("code",[t._v("shutdown")]),t._v(" 或将增强过的类执行 "),s("code",[t._v("reset")]),t._v(" 命令。")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/monitor.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("monitor"),s("OutboundLink")],1),t._v("——方法执行监控")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/watch.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("watch"),s("OutboundLink")],1),t._v("——方法执行数据观测")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/trace.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("trace"),s("OutboundLink")],1),t._v("——方法内部调用路径，并输出方法路径上的每个节点上耗时")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/stack.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("stack"),s("OutboundLink")],1),t._v("——输出当前方法被调用的调用路径")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/tt.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("tt"),s("OutboundLink")],1),t._v("——方法执行数据的时空隧道，记录下指定方法每次调用的入参和返回信息，并能对这些不同的时间下调用进行观测")])]),t._v(" "),s("h3",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" options")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/options.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("options"),s("OutboundLink")],1),t._v("——查看或设置Arthas全局开关")])]),t._v(" "),s("h3",{attrs:{id:"管道"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管道"}},[t._v("#")]),t._v(" 管道")]),t._v(" "),s("p",[t._v("Arthas支持使用管道对上述命令的结果进行进一步的处理，如"),s("code",[t._v("sm java.lang.String * | grep 'index'")])]),t._v(" "),s("ul",[s("li",[t._v("grep——搜索满足条件的\b结果")]),t._v(" "),s("li",[t._v("plaintext——将\b命令的结果去除ANSI颜色")]),t._v(" "),s("li",[t._v("wc——按行统计输出结果")])]),t._v(" "),s("h3",{attrs:{id:"后台异步任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后台异步任务"}},[t._v("#")]),t._v(" 后台异步任务")]),t._v(" "),s("p",[t._v("当线上出现偶发的问题，比如需要watch某个条件，而这个条件一天可能才会出现一次时，异步后台任务就派上用场了，详情请参考"),s("a",{attrs:{href:"https://alibaba.github.io/arthas/async.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("使用 > 将结果重写向到日志文件，使用 & 指定命令是后台运行，session断开不影响任务执行（生命周期默认为1天）")]),t._v(" "),s("li",[t._v("jobs——列出所有job")]),t._v(" "),s("li",[t._v("kill——强制终止任务")]),t._v(" "),s("li",[t._v("fg——将暂停的任务拉到前台执行")]),t._v(" "),s("li",[t._v("bg——将暂停的任务放到后台执行")])]),t._v(" "),s("h3",{attrs:{id:"web-console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-console"}},[t._v("#")]),t._v(" Web Console")]),t._v(" "),s("p",[t._v("通过websocket连接Arthas。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/web-console.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Console"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"用户数据回报"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户数据回报"}},[t._v("#")]),t._v(" 用户数据回报")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("3.1.4")]),t._v("版本后，增加了用户数据回报功能，方便统一做安全或者历史数据统计。")]),t._v(" "),s("p",[t._v("在启动时，指定"),s("code",[t._v("stat-url")]),t._v("，就会回报执行的每一行命令，比如： "),s("code",[t._v("./as.sh --stat-url 'http://192.168.10.11:8080/api/stat'")])]),t._v(" "),s("p",[t._v("在tunnel server里有一个示例的回报代码，用户可以自己在服务器上实现。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/alibaba/arthas/blob/master/tunnel-server/src/main/java/com/alibaba/arthas/tunnel/server/app/web/StatController.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("StatController.java"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"其他特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他特性"}},[t._v("#")]),t._v(" 其他特性")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/async.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("异步命令支持"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/save-log.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("执行结果存日志"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/batch-support.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("批处理的支持"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/alibaba/arthas/issues/11",target:"_blank",rel:"noopener noreferrer"}},[t._v("ognl表达式的用法说明"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/alibaba/arthas",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arthas Github"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://alibaba.github.io/arthas/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arthas 用户文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.jianshu.com/p/4e34d0ab47d1",target:"_blank",rel:"noopener noreferrer"}},[t._v("arthas源码分析"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);